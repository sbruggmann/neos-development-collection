`3.3.4 (2018-02-06) <https://github.com/neos/neos-development-collection/releases/tag/3.3.4>`_
==============================================================================================

Overview of merged pull requests
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

`TASK: make format configurable of ContentDimensions controller <https://github.com/neos/neos-development-collection/pull/1881>`_
---------------------------------------------------------------------------------------------------------------------------------

Needed for the new UI

* Packages: ``Neos``

`TASK: \`\`ReadNodePrivilege\`\` evaluates EEL expression only once <https://github.com/neos/neos-development-collection/pull/1874>`_
-------------------------------------------------------------------------------------------------------------------------------------

The ``ReadNodePrivilege`` evaluates it's EEL evaluator twice unnecessarily,
there's some caching however it should optimize some cases.

`TASK: Add labels for UI DateInput Component neos/neos-ui#1534 <https://github.com/neos/neos-development-collection/pull/1869>`_
--------------------------------------------------------------------------------------------------------------------------------

* Packages: ``Browser`` ``Neos``

`BUGFIX: Avoid errors on undefined array index <https://github.com/neos/neos-development-collection/pull/1865>`_
----------------------------------------------------------------------------------------------------------------

The use of the ternary operator with a potentially undefined array index
leads to errors, this change uses the null-coalesce operator (`??`) instead.

> In particular, this operator does not emit a notice if the left-hand
> side value does not exist, just like isset(). This is especially useful
> on array keys.

(http://php.net/manual/en/language.operators.comparison.php#language.operators.comparison.coalesce)

* Packages: ``ContentRepository``

`BUGFIX: Context structure tree only shows content <https://github.com/neos/neos-development-collection/pull/1785>`_
--------------------------------------------------------------------------------------------------------------------

Changes the base node type filter used in the context structure tree to explicitly include content collections and content elements instead of everything that's not a document node type.

Resolves #1784

`BUGFIX: Use XliffService label override for Neos UI <https://github.com/neos/neos-development-collection/pull/1708>`_
----------------------------------------------------------------------------------------------------------------------

Recently (Flow 4.2) introduced the feature to override labels from other packages or add own translations for other packages via neos/flow-development-collection#894. This was formerly suggested in JIRA-issue FLOW-61.

This works nicely but the Neos UI is not using `\\Neos\\Neos\\Service\\XliffService`. This Service deliveres a xliff-json that contains labels e.g. for the property editor. Currently you cannot override labels from other packages that are used in the property editor. `\\Neos\\Neos\\Service\\XliffService::parseXliffToArray` is annotated (todo) to be changed when FLOW-61 is resolved.

This change refactors the class to make use of `\\Neos\\Flow\\I18n\\Xliff\\Service\\XliffFileProvider::getFile` which handles the overrides.

* Packages: ``Neos`` ``SiteKickstarter``

`BUGFIX: Let fusion render preview URIs for the Neos backend <https://github.com/neos/neos-development-collection/pull/1815>`_
------------------------------------------------------------------------------------------------------------------------------

Preview links are now generated via Fusion instead of Javascript

`TASK: Rename folder for Node Migrations <https://github.com/neos/neos-development-collection/pull/1863>`_
----------------------------------------------------------------------------------------------------------

With this change node migrations are expected to be located
in a directory `Migrations/ContentRepository`.

For backwards compatibility migrations in `Migrations/TYPO3CR` are
still supported.

Fixes: #1861

* Packages: ``Browser`` ``ContentRepository`` ``Fusion`` ``Media`` ``Neos`` ``NodeTypes`` ``SiteKickstarter``

`TASK: Update SPDX license identifier in composer.json <https://github.com/neos/neos-development-collection/pull/1862>`_
------------------------------------------------------------------------------------------------------------------------

`TASK: Display changes in workspaces module when setting/unsetting a DateTime values <https://github.com/neos/neos-development-collection/pull/1783>`_
------------------------------------------------------------------------------------------------------------------------------------------------------

When a DateTime property value is either set for the first time or unset the workspace module will now show that change. Previously it would only display the change if the time was set changed to a different time.

`BUGFIX: Corrected ContentReferences translation namespace <https://github.com/neos/neos-development-collection/pull/1853>`_
----------------------------------------------------------------------------------------------------------------------------

#1659 splits the Neos.NodeTypes package into separate packaged. In the translation
rewrite script I had an error, so the Neos.NodeTypes.ContentReferences was set as
`Neos.NodeTypes.ContentReferences.ContentReferences` instead of
`Neos.NodeTypes.ContentReferences`. This bug makes sure that labels are correctly
available.

* Packages: ``ContentReferences``

`BUGFIX: Allow node transformations without setting <https://github.com/neos/neos-development-collection/pull/1849>`_
---------------------------------------------------------------------------------------------------------------------

This change allows to create/use node transformations that do not use settings.

Without this change, one always had to provide dummy settings.

* Packages: ``Browser`` ``ContentRepository`` ``NodeTypes``

`TASK: Document canvas width and height in editPreviewMode <https://github.com/neos/neos-development-collection/pull/1850>`_
----------------------------------------------------------------------------------------------------------------------------

**What I did**
I added missing components in documentation for custom preview modes

**How I did it**
I analysed the react frontend and found some editable variables for height and width. After searching the code for it, I found some optional variables, which were missing in the documentation. These variables are new and came with the new UI.

- [x] The PR is created against the [lowest maintained branch](https://www.neos.io/features/release-roadmap.html)

* Packages: ``BaseMixins`` ``Browser`` ``Neos``

`BUGFIX: Remove duplicate entry in composer.json (neos/fluid-adaptor) <https://github.com/neos/neos-development-collection/pull/1848>`_
---------------------------------------------------------------------------------------------------------------------------------------

Fixes #1847

* Packages: ``Browser`` ``Fusion``

`TASK: Check node migration filename before use <https://github.com/neos/neos-development-collection/pull/1845>`_
-----------------------------------------------------------------------------------------------------------------

This makes sure node migrations not named as expected are detected
and rejected properly.

* Packages: ``Browser`` ``ContentRepository``

`TASK: Tweak Travis CI build matrix <https://github.com/neos/neos-development-collection/pull/1841>`_
-----------------------------------------------------------------------------------------------------

This removes some options no longer needed, since the required PostgreSQL
versions are meanwhile available without any use of sudo in the default
container infrastructure, as shown in

- https://docs.travis-ci.com/user/reference/overview/#Virtualization-environments
- https://docs.travis-ci.com/user/database-setup/#Using-a-different-PostgreSQL-Version

`Detailed log <https://github.com/neos/neos-development-collection/compare/3.3.3...3.3.4>`_
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
